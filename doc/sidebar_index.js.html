<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: sidebar/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: sidebar/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* Namespace for the sidebar
* @namespace
* @alias KAT.sidebar
*/
KAT.sidebar = {};

/**
* Set up and insert Annotation Toolkit sidemenu
*
* @param {KAT.Storage.Store} store - Annotation Store to bind to.
* @param {KAT.reviewStore.store} reviewStore - Store that maps reviews to annotation id's
*
* @function
* @static
* @name init
* @memberof KAT.sidebar
*/
KAT.sidebar.init = function(store, reviewStore){

  this.store = store;
  this.reviewStore = reviewStore;

  //mode of the sidebar.
  var mode;

  switch(KAT.sidebar.annotationMode) {
    
    case "Review":
      mode = "Review";
      break;

    case "Annotation":
      mode = "Annotation";
      break;

    default:
      mode = "Reading";
  }

  //get the height of the window.
  var winHeight = jQuery(window).height();

  //create a button to toggle annotations
  KAT.sidebar.modeButtonGroup = $("&lt;div>")
    .addClass("btn-group")
    .attr("role", "group");
   //.BS();

  //add Button for each option
  ["Reading", "Annotation", "Review"].map( function(label) {

    //set some button initially active
    var isActive = "";
    if(label == mode) 
      isActive = "active";

    $("&lt;button>")
      .attr("type", "button")
      .attr("mode", label)
      .addClass("btn btn-default")
      .addClass(isActive)
      .text(label)
      .click(function(){
        KAT.sidebar.toggleAnnotationMode(label);
      })
      .appendTo(KAT.sidebar.modeButtonGroup);

  } );


  //create collapsible sidebar
  var collapsibleMenu = jQuery('&lt;div>').addClass("collapsible")

  .append(
    //add a heading
    $("&lt;div>").addClass("KATTitle").html("&lt;h3>KWARC Annotation Tool&lt;/h3>"),

    // and a lot of buttons
    $("&lt;div>").addClass("KATSidebarButtons")
    .append(
      //to toggle the mode
      KAT.sidebar.modeButtonGroup,
      "&lt;br/>",
      "&lt;br/>",

      //to import annotations
      $("&lt;button>")
      .text("Import Annotations")
      .addClass("helpButton")
      .addClass("btn btn-default")
      .click(function(){
        store.showImportDialog();
      }),
      "&lt;br/>",
      "&lt;br/>",

      // to export annotations
      $("&lt;button>")
      .text("Export Annotations")
      .addClass("helpButton")
      .addClass("btn btn-default")
      .click(function(){
        store.showExportDialog();
      }),
      "&lt;br/>",
      "&lt;br/>",

      //to import reviews
      $("&lt;button>")
      .text("Import Reviews")
      .addClass("helpButton")
      .addClass("btn btn-default")
      .click(function(){
        reviewStore.importReviews();
      }),
      "&lt;br/>",
      "&lt;br/>",

      // to export reviews
      $("&lt;button>")
      .text("Export Reviews")
      .addClass("helpButton")
      .addClass("btn btn-default")
      .click(function(){
        reviewStore.exportReviews();
      }),
      "&lt;br/>",
      "&lt;br/>",

      //to report an issue
      $("&lt;button>")
      .text("Report Issue")
      .addClass("helpButton")
      .addClass("btn btn-default")
      .click(function(){
        //open github issues page
        window.open("https://github.com/KWARC/KAT/issues", "_blank");
      }),
      "&lt;br/>",
      "&lt;br/>",

      "&lt;br/>"
    ),
    $("&lt;ul>").addClass("KATMenuItems")
  )
  .css({
    'position':'fixed',
    'right': KAT.sidebar.hideWidth,
    'height': winHeight
  }).prependTo("body");

  // create button to toggle collapse and resurection of sidemenu and define properties
  var collapsibleToggle = $("&lt;button>")
  .text("«")
  .addClass("collapseToggle")
  .css({'height': winHeight-20, 
        'z-index': 100})
  .click(KAT.sidebar.toggleSidebar).prependTo(collapsibleMenu); //adapted from init function below

  //Make sure to show the sidebar
  KAT.sidebar.showSidebar();

  // define changes to sidemenu when page is resized
  // this seems hacky, try to make it all relative with global CSS
  jQuery( window ).resize(function() {
    winHeight = jQuery(window).height();

    collapsibleMenu.css({
      'position':'fixed',
      'right': KAT.sidebar.hideWidth,
      'height': winHeight
    });

    collapsibleToggle.css({
      'height': winHeight-20
    });
  });
};

/**
* Shows the sidebar.
*
* @function
* @static
* @name hideSidebar
* @memberof KAT.sidebar
*/
KAT.sidebar.showSidebar = function(){
  KAT.sidebar.extended = true;

  jQuery(".collapseToggle")
  .text("»")
  .parent().animate({right: "0"}, KAT.sidebar.animateLength );
};

/**
* Hides the sidebar.
*
* @function
* @static
* @name hideSidebar
* @memberof KAT.sidebar
*/
KAT.sidebar.hideSidebar = function(){
  KAT.sidebar.extended = false;

  jQuery(".collapseToggle")
  .text("«") // Change text of button.
  .parent().animate({right: KAT.sidebar.hideWidth}, KAT.sidebar.animateLength);
};

/**
* Toggles the state of the sidebar.
*
* @function
* @static
* @name toggleSidebar
* @memberof KAT.sidebar
*/
KAT.sidebar.toggleSidebar = function(){
  if (KAT.sidebar.extended){
    //we are now hidden
    KAT.sidebar.hideSidebar();
  } else {
    //we are now visible
    KAT.sidebar.showSidebar();
  }
};

/**
* Toggles the annotation mode of KAT.
*
* @function
* @static
* @name toggleAnnotationMode
* @memberof KAT.sidebar
*/
KAT.sidebar.toggleAnnotationMode = function(label){

  if(KAT.sidebar.annotationMode == "Review") {
    //remove specific menu
    KAT.storage.Annotation.prototype.unfocus();
    KAT.sidebar.removeReviewForm();

  }

  KAT.sidebar.annotationMode = label;
  KAT.sidebar.modeButtonGroup.find(".active").removeClass("active");
  KAT.sidebar.modeButtonGroup.find("[mode='"+label+"']").addClass("active");

  if(label == "Review")
    KAT.sidebar.generateReviewForm();


};

/**
* Stores if the sidebar is extended.
* Should be read-only.
*
* @type {boolean}
* @name KAT.sidebar.extended
*/
KAT.sidebar.extended = false;

/**
* Stores if KAT is in annotation Mode.
* Should be readonly.
*
* @type {boolean}
* @name KAT.sidebar.annotationMode
*/
KAT.sidebar.annotationMode = false;

/**
* Width of the sidebar that will be hidden
*
* @type {integer}
* @default -480
* @name KAT.sidebar.hideWidth
*/
KAT.sidebar.hideWidth = -480;

/**
* Duration of animation
*
* @type {integer}
* @default 100
* @name KAT.sidebar.animateLength
*/
KAT.sidebar.animateLength = 100;

/**
* Contains a reference to the mode toggle button in the sidebar.
*
* @type {jQuery}
* @name KAT.sidebar.modeButtonGroup
*/
KAT.sidebar.modeButtonGroup = undefined;

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="KAT.gui.html">gui</a></li><li><a href="KAT.model.Concept.html">Concept</a></li><li><a href="KAT.model.Field.html">Field</a></li><li><a href="KAT.model.KAnnSpec.html">KAnnSpec</a></li><li><a href="KAT.model.KAnnSpecCollection.html">KAnnSpecCollection</a></li><li><a href="KAT.model.Option.html">Option</a></li><li><a href="KAT.model.ParsingError.html">ParsingError</a></li><li><a href="KAT.reviewStore.Store.html">Store</a></li><li><a href="KAT.storage.Annotation.html">Annotation</a></li><li><a href="KAT.storage.Store.html">Store</a></li></ul><h3>Namespaces</h3><ul><li><a href="KAT.html">KAT</a></li><li><a href="KAT.model.html">model</a></li><li><a href="KAT.module.html">module</a></li><li><a href="KAT.rdf.html">rdf</a></li><li><a href="KAT.reviewStore.html">reviewStore</a></li><li><a href="KAT.sidebar.html">sidebar</a></li><li><a href="KAT.storage.html">storage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a> on Mon Oct 26 2015 21:17:56 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
