<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: sidebar/review.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: sidebar/review.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
* Opens Form in the sidebar for Review Mode
*
* @function
* @name generateReviewForm
* @memberof KAT.sidebar
*/

KAT.sidebar.generateReviewForm = function() {

	var annotationText;

	var annotationPointer = -1;
	var annots = this.store.annotations;

	if(annots.length === 0)
		return;

	var appendAnnotationText = function() {

		//just compute the tooltip and show it in the review menu
		var computedTooltip = annots[annotationPointer % annots.length].recomputeTooltip();

	  	annotationText.html(computedTooltip);

	};


	var next = function() {
		var x = annots[0].unfocus() || undefined;
		annots[++annotationPointer % annots.length].focus();
		appendAnnotationText();

		checkButtonStatus();
	};

	var prev = function() {
		var x = annots[0].unfocus() || undefined;

		if(annotationPointer &lt;= 0) {
			annotationPointer+= annots.length;
		}

		annots[--annotationPointer % annots.length].focus();
		appendAnnotationText();

		checkButtonStatus();
	};


	var navigation = $("&lt;li>")
		.addClass("review navigation")
	  	.appendTo(".KATMenuItems");


	/**********************************************/

		annotationText = $("&lt;div>")
		.addClass("annotationText")
		.appendTo(navigation);

	/**********************************************/

	var navBtnGroup = $("&lt;div>")
		.addClass("btn-group")
		.appendTo(navigation);

  	var nextButton = $("&lt;button>")
	  	.text("Next")
	  	.addClass("btn btn-default")
	  	.click(function() { next(); })
	  	.appendTo(navBtnGroup);

  	var previousButton = $("&lt;button>")
	  	.text("Previous")
	  	.addClass("btn btn-default")
	  	.click(function() { prev(); })
	  	.appendTo(navBtnGroup);

	/**********************************************/

	var rateBtnGroup = $("&lt;div>")
		.addClass("btn-group")
		.appendTo(navigation);

	var likeButton = $("&lt;button>")
		.addClass("btn btn-default like")
		.click(function() { removeButtonClass(); likeButton.addClass("btn-success"); reviewStore.annotationReviews[annots[annotationPointer % annots.length].uuid] = "approve"; } )
		.appendTo(rateBtnGroup);

	$("&lt;span>")
		.addClass("glyphicon glyphicon-thumbs-up")
		.appendTo(likeButton);

	var reviewStore = this.reviewStore;

	var dislikeButton = $("&lt;button>")
		.addClass("btn btn-default dislike")
		.click(function() { removeButtonClass(); dislikeButton.addClass("btn-danger"); reviewStore.annotationReviews[annots[annotationPointer % annots.length].uuid] = "disapprove"; } )
		.appendTo(rateBtnGroup);

	$("&lt;span>")
		.addClass("glyphicon glyphicon-thumbs-down")
		.appendTo(dislikeButton);


	var removeButtonClass = function() {

		navigation.find("button").removeClass("btn-danger btn-success");

	};

	var checkButtonStatus = function() {

		removeButtonClass();

		if ( reviewStore.annotationReviews[annots[annotationPointer % annots.length].uuid] == "approve" ) {

			likeButton.addClass("btn-success");

		} else if ( reviewStore.annotationReviews[annots[annotationPointer % annots.length].uuid] == "disapprove" ) {

			dislikeButton.addClass("btn-danger");

		}

	};


	/**********************************************/

  	//initialize with focus on first annotation
  	next();
};

/**
* Closes Form in the sidebar for Review Mode
*
* @function
* @name removeReviewForm
* @memberof KAT.sidebar
*/

KAT.sidebar.removeReviewForm = function() {

	var navigation = $(".review.navigation");

	if(navigation)
		navigation.remove();

};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="KAT.gui.html">gui</a></li><li><a href="KAT.model.Concept.html">Concept</a></li><li><a href="KAT.model.Field.html">Field</a></li><li><a href="KAT.model.KAnnSpec.html">KAnnSpec</a></li><li><a href="KAT.model.KAnnSpecCollection.html">KAnnSpecCollection</a></li><li><a href="KAT.model.Option.html">Option</a></li><li><a href="KAT.model.ParsingError.html">ParsingError</a></li><li><a href="KAT.reviewStore.Store.html">Store</a></li><li><a href="KAT.storage.Annotation.html">Annotation</a></li><li><a href="KAT.storage.Store.html">Store</a></li></ul><h3>Namespaces</h3><ul><li><a href="KAT.html">KAT</a></li><li><a href="KAT.model.html">model</a></li><li><a href="KAT.module.html">module</a></li><li><a href="KAT.rdf.html">rdf</a></li><li><a href="KAT.reviewStore.html">reviewStore</a></li><li><a href="KAT.sidebar.html">sidebar</a></li><li><a href="KAT.storage.html">storage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a> on Fri Jan 08 2016 00:53:17 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
